{"version":3,"names":["_blocks","require","_data","_components","_i18n","_element","_compose","_a11y","_preferences","_lockUnlock","_store","_category","_interopRequireDefault","_jsxRuntime","BlockManager","debouncedSpeak","useDebounce","speak","search","setSearch","useState","showBlockTypes","unlock","useDispatch","editorStore","blockTypes","categories","hasBlockSupport","isMatchingSearchTerm","numberOfHiddenBlocks","useSelect","select","_select$get","_blockTypes","blocksStore","getBlockTypes","hiddenBlockTypes","preferencesStore","get","filter","hiddenBlock","some","registeredBlock","name","getCategories","Array","isArray","length","enableAllBlockTypes","newBlockTypes","blockNames","map","filteredBlockTypes","blockType","parent","includes","useEffect","count","resultsFoundMessage","sprintf","_n","jsxs","className","children","jsx","Button","__next40pxDefaultSize","variant","onClick","__","SearchControl","__nextHasNoMarginBottom","label","placeholder","value","onChange","nextSearch","tabIndex","role","category","default","title","slug"],"sources":["@wordpress/editor/src/components/block-manager/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { store as blocksStore } from '@wordpress/blocks';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { SearchControl, Button } from '@wordpress/components';\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport { useEffect, useState } from '@wordpress/element';\nimport { useDebounce } from '@wordpress/compose';\nimport { speak } from '@wordpress/a11y';\nimport { store as preferencesStore } from '@wordpress/preferences';\n\n/**\n * Internal dependencies\n */\nimport { unlock } from '../../lock-unlock';\nimport { store as editorStore } from '../../store';\nimport BlockManagerCategory from './category';\n\nexport default function BlockManager() {\n\tconst debouncedSpeak = useDebounce( speak, 500 );\n\tconst [ search, setSearch ] = useState( '' );\n\tconst { showBlockTypes } = unlock( useDispatch( editorStore ) );\n\n\tconst {\n\t\tblockTypes,\n\t\tcategories,\n\t\thasBlockSupport,\n\t\tisMatchingSearchTerm,\n\t\tnumberOfHiddenBlocks,\n\t} = useSelect( ( select ) => {\n\t\t// Some hidden blocks become unregistered\n\t\t// by removing for instance the plugin that registered them, yet\n\t\t// they're still remain as hidden by the user's action.\n\t\t// We consider \"hidden\", blocks which were hidden and\n\t\t// are still registered.\n\t\tconst _blockTypes = select( blocksStore ).getBlockTypes();\n\t\tconst hiddenBlockTypes = (\n\t\t\tselect( preferencesStore ).get( 'core', 'hiddenBlockTypes' ) ?? []\n\t\t).filter( ( hiddenBlock ) => {\n\t\t\treturn _blockTypes.some(\n\t\t\t\t( registeredBlock ) => registeredBlock.name === hiddenBlock\n\t\t\t);\n\t\t} );\n\n\t\treturn {\n\t\t\tblockTypes: _blockTypes,\n\t\t\tcategories: select( blocksStore ).getCategories(),\n\t\t\thasBlockSupport: select( blocksStore ).hasBlockSupport,\n\t\t\tisMatchingSearchTerm: select( blocksStore ).isMatchingSearchTerm,\n\t\t\tnumberOfHiddenBlocks:\n\t\t\t\tArray.isArray( hiddenBlockTypes ) && hiddenBlockTypes.length,\n\t\t};\n\t}, [] );\n\n\tfunction enableAllBlockTypes( newBlockTypes ) {\n\t\tconst blockNames = newBlockTypes.map( ( { name } ) => name );\n\t\tshowBlockTypes( blockNames );\n\t}\n\n\tconst filteredBlockTypes = blockTypes.filter(\n\t\t( blockType ) =>\n\t\t\thasBlockSupport( blockType, 'inserter', true ) &&\n\t\t\t( ! search || isMatchingSearchTerm( blockType, search ) ) &&\n\t\t\t( ! blockType.parent ||\n\t\t\t\tblockType.parent.includes( 'core/post-content' ) )\n\t);\n\n\t// Announce search results on change\n\tuseEffect( () => {\n\t\tif ( ! search ) {\n\t\t\treturn;\n\t\t}\n\t\tconst count = filteredBlockTypes.length;\n\t\tconst resultsFoundMessage = sprintf(\n\t\t\t/* translators: %d: number of results. */\n\t\t\t_n( '%d result found.', '%d results found.', count ),\n\t\t\tcount\n\t\t);\n\t\tdebouncedSpeak( resultsFoundMessage );\n\t}, [ filteredBlockTypes?.length, search, debouncedSpeak ] );\n\n\treturn (\n\t\t<div className=\"editor-block-manager__content\">\n\t\t\t{ !! numberOfHiddenBlocks && (\n\t\t\t\t<div className=\"editor-block-manager__disabled-blocks-count\">\n\t\t\t\t\t{ sprintf(\n\t\t\t\t\t\t/* translators: %d: number of blocks. */\n\t\t\t\t\t\t_n(\n\t\t\t\t\t\t\t'%d block is hidden.',\n\t\t\t\t\t\t\t'%d blocks are hidden.',\n\t\t\t\t\t\t\tnumberOfHiddenBlocks\n\t\t\t\t\t\t),\n\t\t\t\t\t\tnumberOfHiddenBlocks\n\t\t\t\t\t) }\n\t\t\t\t\t<Button\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\tenableAllBlockTypes( filteredBlockTypes )\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Reset' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t<SearchControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tlabel={ __( 'Search for a block' ) }\n\t\t\t\tplaceholder={ __( 'Search for a block' ) }\n\t\t\t\tvalue={ search }\n\t\t\t\tonChange={ ( nextSearch ) => setSearch( nextSearch ) }\n\t\t\t\tclassName=\"editor-block-manager__search\"\n\t\t\t/>\n\t\t\t<div\n\t\t\t\ttabIndex=\"0\"\n\t\t\t\trole=\"region\"\n\t\t\t\taria-label={ __( 'Available block types' ) }\n\t\t\t\tclassName=\"editor-block-manager__results\"\n\t\t\t>\n\t\t\t\t{ filteredBlockTypes.length === 0 && (\n\t\t\t\t\t<p className=\"editor-block-manager__no-results\">\n\t\t\t\t\t\t{ __( 'No blocks found.' ) }\n\t\t\t\t\t</p>\n\t\t\t\t) }\n\t\t\t\t{ categories.map( ( category ) => (\n\t\t\t\t\t<BlockManagerCategory\n\t\t\t\t\t\tkey={ category.slug }\n\t\t\t\t\t\ttitle={ category.title }\n\t\t\t\t\t\tblockTypes={ filteredBlockTypes.filter(\n\t\t\t\t\t\t\t( blockType ) =>\n\t\t\t\t\t\t\t\tblockType.category === category.slug\n\t\t\t\t\t\t) }\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t\t\t<BlockManagerCategory\n\t\t\t\t\ttitle={ __( 'Uncategorized' ) }\n\t\t\t\t\tblockTypes={ filteredBlockTypes.filter(\n\t\t\t\t\t\t( { category } ) => ! category\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}