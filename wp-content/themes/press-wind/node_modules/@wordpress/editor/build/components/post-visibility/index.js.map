{"version":3,"names":["_i18n","require","_element","_components","_compose","_data","_blockEditor","_utils","_store","_jsxRuntime","PostVisibility","onClose","instanceId","useInstanceId","status","visibility","password","useSelect","select","editorStore","getEditedPostAttribute","getEditedPostVisibility","editPost","savePost","useDispatch","hasPassword","setHasPassword","useState","showPrivateConfirmDialog","setShowPrivateConfirmDialog","setPublic","setPrivate","confirmPrivate","handleDialogCancel","setPasswordProtected","updatePassword","event","target","value","jsxs","className","children","jsx","__experimentalInspectorPopoverHeader","title","__","help","VisuallyHidden","as","PostVisibilityChoice","label","visibilityOptions","public","info","checked","onChange","private","htmlFor","id","type","placeholder","__experimentalConfirmDialog","isOpen","onConfirm","onCancel","confirmButtonText","size","props","name"],"sources":["@wordpress/editor/src/components/post-visibility/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\nimport {\n\tVisuallyHidden,\n\t__experimentalConfirmDialog as ConfirmDialog,\n} from '@wordpress/components';\nimport { useInstanceId } from '@wordpress/compose';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __experimentalInspectorPopoverHeader as InspectorPopoverHeader } from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport { visibilityOptions } from './utils';\nimport { store as editorStore } from '../../store';\n\n/**\n * Allows users to set the visibility of a post.\n *\n * @param {Object}   props         The component props.\n * @param {Function} props.onClose Function to call when the popover is closed.\n * @return {JSX.Element} The rendered component.\n */\nexport default function PostVisibility( { onClose } ) {\n\tconst instanceId = useInstanceId( PostVisibility );\n\n\tconst { status, visibility, password } = useSelect( ( select ) => ( {\n\t\tstatus: select( editorStore ).getEditedPostAttribute( 'status' ),\n\t\tvisibility: select( editorStore ).getEditedPostVisibility(),\n\t\tpassword: select( editorStore ).getEditedPostAttribute( 'password' ),\n\t} ) );\n\n\tconst { editPost, savePost } = useDispatch( editorStore );\n\n\tconst [ hasPassword, setHasPassword ] = useState( !! password );\n\tconst [ showPrivateConfirmDialog, setShowPrivateConfirmDialog ] =\n\t\tuseState( false );\n\n\tconst setPublic = () => {\n\t\teditPost( {\n\t\t\tstatus: visibility === 'private' ? 'draft' : status,\n\t\t\tpassword: '',\n\t\t} );\n\t\tsetHasPassword( false );\n\t};\n\n\tconst setPrivate = () => {\n\t\tsetShowPrivateConfirmDialog( true );\n\t};\n\n\tconst confirmPrivate = () => {\n\t\teditPost( { status: 'private', password: '' } );\n\t\tsetHasPassword( false );\n\t\tsetShowPrivateConfirmDialog( false );\n\t\tsavePost();\n\t};\n\n\tconst handleDialogCancel = () => {\n\t\tsetShowPrivateConfirmDialog( false );\n\t};\n\n\tconst setPasswordProtected = () => {\n\t\teditPost( {\n\t\t\tstatus: visibility === 'private' ? 'draft' : status,\n\t\t\tpassword: password || '',\n\t\t} );\n\t\tsetHasPassword( true );\n\t};\n\n\tconst updatePassword = ( event ) => {\n\t\teditPost( { password: event.target.value } );\n\t};\n\n\treturn (\n\t\t<div className=\"editor-post-visibility\">\n\t\t\t<InspectorPopoverHeader\n\t\t\t\ttitle={ __( 'Visibility' ) }\n\t\t\t\thelp={ __( 'Control how this post is viewed.' ) }\n\t\t\t\tonClose={ onClose }\n\t\t\t/>\n\t\t\t<fieldset className=\"editor-post-visibility__fieldset\">\n\t\t\t\t<VisuallyHidden as=\"legend\">\n\t\t\t\t\t{ __( 'Visibility' ) }\n\t\t\t\t</VisuallyHidden>\n\t\t\t\t<PostVisibilityChoice\n\t\t\t\t\tinstanceId={ instanceId }\n\t\t\t\t\tvalue=\"public\"\n\t\t\t\t\tlabel={ visibilityOptions.public.label }\n\t\t\t\t\tinfo={ visibilityOptions.public.info }\n\t\t\t\t\tchecked={ visibility === 'public' && ! hasPassword }\n\t\t\t\t\tonChange={ setPublic }\n\t\t\t\t/>\n\t\t\t\t<PostVisibilityChoice\n\t\t\t\t\tinstanceId={ instanceId }\n\t\t\t\t\tvalue=\"private\"\n\t\t\t\t\tlabel={ visibilityOptions.private.label }\n\t\t\t\t\tinfo={ visibilityOptions.private.info }\n\t\t\t\t\tchecked={ visibility === 'private' }\n\t\t\t\t\tonChange={ setPrivate }\n\t\t\t\t/>\n\t\t\t\t<PostVisibilityChoice\n\t\t\t\t\tinstanceId={ instanceId }\n\t\t\t\t\tvalue=\"password\"\n\t\t\t\t\tlabel={ visibilityOptions.password.label }\n\t\t\t\t\tinfo={ visibilityOptions.password.info }\n\t\t\t\t\tchecked={ hasPassword }\n\t\t\t\t\tonChange={ setPasswordProtected }\n\t\t\t\t/>\n\t\t\t\t{ hasPassword && (\n\t\t\t\t\t<div className=\"editor-post-visibility__password\">\n\t\t\t\t\t\t<VisuallyHidden\n\t\t\t\t\t\t\tas=\"label\"\n\t\t\t\t\t\t\thtmlFor={ `editor-post-visibility__password-input-${ instanceId }` }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Create password' ) }\n\t\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"editor-post-visibility__password-input\"\n\t\t\t\t\t\t\tid={ `editor-post-visibility__password-input-${ instanceId }` }\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tonChange={ updatePassword }\n\t\t\t\t\t\t\tvalue={ password }\n\t\t\t\t\t\t\tplaceholder={ __( 'Use a secure password' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</fieldset>\n\t\t\t<ConfirmDialog\n\t\t\t\tisOpen={ showPrivateConfirmDialog }\n\t\t\t\tonConfirm={ confirmPrivate }\n\t\t\t\tonCancel={ handleDialogCancel }\n\t\t\t\tconfirmButtonText={ __( 'Publish' ) }\n\t\t\t\tsize=\"medium\"\n\t\t\t>\n\t\t\t\t{ __( 'Would you like to privately publish this post now?' ) }\n\t\t\t</ConfirmDialog>\n\t\t</div>\n\t);\n}\n\nfunction PostVisibilityChoice( { instanceId, value, label, info, ...props } ) {\n\treturn (\n\t\t<div className=\"editor-post-visibility__choice\">\n\t\t\t<input\n\t\t\t\ttype=\"radio\"\n\t\t\t\tname={ `editor-post-visibility__setting-${ instanceId }` }\n\t\t\t\tvalue={ value }\n\t\t\t\tid={ `editor-post-${ value }-${ instanceId }` }\n\t\t\t\taria-describedby={ `editor-post-${ value }-${ instanceId }-description` }\n\t\t\t\tclassName=\"editor-post-visibility__radio\"\n\t\t\t\t{ ...props }\n\t\t\t/>\n\t\t\t<label\n\t\t\t\thtmlFor={ `editor-post-${ value }-${ instanceId }` }\n\t\t\t\tclassName=\"editor-post-visibility__label\"\n\t\t\t>\n\t\t\t\t{ label }\n\t\t\t</label>\n\t\t\t<p\n\t\t\t\tid={ `editor-post-${ value }-${ instanceId }-description` }\n\t\t\t\tclassName=\"editor-post-visibility__info\"\n\t\t\t>\n\t\t\t\t{ info }\n\t\t\t</p>\n\t\t</div>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}