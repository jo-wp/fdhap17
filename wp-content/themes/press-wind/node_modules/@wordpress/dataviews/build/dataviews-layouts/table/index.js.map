{"version":3,"names":["_clsx","_interopRequireDefault","require","_i18n","_components","_element","_dataviewsSelectionCheckbox","_dataviewsItemActions","_constants","_dataviewsBulkActions","_columnHeaderMenu","_index","_jsxRuntime","TableColumn","column","fields","view","props","field","find","f","id","jsx","TableColumnField","combinedField","layout","combinedFields","TableColumnCombined","primaryField","item","className","clsx","children","render","map","child","direction","__experimentalHStack","spacing","__experimentalVStack","TableRow","hasBulkActions","actions","selection","getItemId","onChangeSelection","hasPossibleBulkAction","useHasAPossibleBulkAction","isSelected","includes","isHovered","setIsHovered","useState","handleMouseEnter","handleMouseLeave","isTouchDeviceRef","useRef","columns","getVisibleFieldIds","jsxs","onMouseEnter","onMouseLeave","onTouchStart","current","onClick","document","getSelection","type","filter","itemId","style","width","default","disabled","_view$layout$styles$c","maxWidth","minWidth","styles","length","e","stopPropagation","ViewTable","data","isLoading","onChangeView","setOpenedFilter","headerMenuRefs","Map","headerMenuToFocusRef","nextHeaderMenuToFocus","setNextHeaderMenuToFocus","useSomeItemHasAPossibleBulkAction","useEffect","focus","undefined","tableNoticeId","useId","onHide","hidden","get","fallback","node","hasData","Fragment","scope","BulkSelectionCheckbox","index","_view$layout$styles$c2","sort","sortValues","ref","set","delete","fieldId","__","toString","Spinner","_default","exports"],"sources":["@wordpress/dataviews/src/dataviews-layouts/table/index.tsx"],"sourcesContent":["/**\n * External dependencies\n */\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tSpinner,\n\t__experimentalHStack as HStack,\n\t__experimentalVStack as VStack,\n} from '@wordpress/components';\nimport { useEffect, useId, useRef, useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport SingleSelectionCheckbox from '../../components/dataviews-selection-checkbox';\nimport ItemActions from '../../components/dataviews-item-actions';\nimport { sortValues } from '../../constants';\nimport {\n\tuseSomeItemHasAPossibleBulkAction,\n\tuseHasAPossibleBulkAction,\n\tBulkSelectionCheckbox,\n} from '../../components/dataviews-bulk-actions';\nimport type {\n\tAction,\n\tNormalizedField,\n\tViewTable as ViewTableType,\n\tViewTableProps,\n\tCombinedField,\n} from '../../types';\nimport type { SetSelection } from '../../private-types';\nimport ColumnHeaderMenu from './column-header-menu';\nimport { getVisibleFieldIds } from '../index';\n\ninterface TableColumnFieldProps< Item > {\n\tprimaryField?: NormalizedField< Item >;\n\tfield: NormalizedField< Item >;\n\titem: Item;\n}\n\ninterface TableColumnCombinedProps< Item > {\n\tprimaryField?: NormalizedField< Item >;\n\tfields: NormalizedField< Item >[];\n\tfield: CombinedField;\n\titem: Item;\n\tview: ViewTableType;\n}\n\ninterface TableColumnProps< Item > {\n\tprimaryField?: NormalizedField< Item >;\n\tfields: NormalizedField< Item >[];\n\titem: Item;\n\tcolumn: string;\n\tview: ViewTableType;\n}\n\ninterface TableRowProps< Item > {\n\thasBulkActions: boolean;\n\titem: Item;\n\tactions: Action< Item >[];\n\tfields: NormalizedField< Item >[];\n\tid: string;\n\tview: ViewTableType;\n\tprimaryField?: NormalizedField< Item >;\n\tselection: string[];\n\tgetItemId: ( item: Item ) => string;\n\tonChangeSelection: SetSelection;\n}\n\nfunction TableColumn< Item >( {\n\tcolumn,\n\tfields,\n\tview,\n\t...props\n}: TableColumnProps< Item > ) {\n\tconst field = fields.find( ( f ) => f.id === column );\n\tif ( !! field ) {\n\t\treturn <TableColumnField { ...props } field={ field } />;\n\t}\n\tconst combinedField = view.layout?.combinedFields?.find(\n\t\t( f ) => f.id === column\n\t);\n\tif ( !! combinedField ) {\n\t\treturn (\n\t\t\t<TableColumnCombined\n\t\t\t\t{ ...props }\n\t\t\t\tfields={ fields }\n\t\t\t\tview={ view }\n\t\t\t\tfield={ combinedField }\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn null;\n}\n\nfunction TableColumnField< Item >( {\n\tprimaryField,\n\titem,\n\tfield,\n}: TableColumnFieldProps< Item > ) {\n\treturn (\n\t\t<div\n\t\t\tclassName={ clsx( 'dataviews-view-table__cell-content-wrapper', {\n\t\t\t\t'dataviews-view-table__primary-field':\n\t\t\t\t\tprimaryField?.id === field.id,\n\t\t\t} ) }\n\t\t>\n\t\t\t<field.render { ...{ item } } />\n\t\t</div>\n\t);\n}\n\nfunction TableColumnCombined< Item >( {\n\tfield,\n\t...props\n}: TableColumnCombinedProps< Item > ) {\n\tconst children = field.children.map( ( child ) => (\n\t\t<TableColumn key={ child } { ...props } column={ child } />\n\t) );\n\n\tif ( field.direction === 'horizontal' ) {\n\t\treturn <HStack spacing={ 3 }>{ children }</HStack>;\n\t}\n\treturn <VStack spacing={ 0 }>{ children }</VStack>;\n}\n\nfunction TableRow< Item >( {\n\thasBulkActions,\n\titem,\n\tactions,\n\tfields,\n\tid,\n\tview,\n\tprimaryField,\n\tselection,\n\tgetItemId,\n\tonChangeSelection,\n}: TableRowProps< Item > ) {\n\tconst hasPossibleBulkAction = useHasAPossibleBulkAction( actions, item );\n\tconst isSelected = hasPossibleBulkAction && selection.includes( id );\n\tconst [ isHovered, setIsHovered ] = useState( false );\n\n\tconst handleMouseEnter = () => {\n\t\tsetIsHovered( true );\n\t};\n\tconst handleMouseLeave = () => {\n\t\tsetIsHovered( false );\n\t};\n\n\t// Will be set to true if `onTouchStart` fires. This happens before\n\t// `onClick` and can be used to exclude touchscreen devices from certain\n\t// behaviours.\n\tconst isTouchDeviceRef = useRef( false );\n\tconst columns = getVisibleFieldIds( view, fields );\n\n\treturn (\n\t\t<tr\n\t\t\tclassName={ clsx( 'dataviews-view-table__row', {\n\t\t\t\t'is-selected': hasPossibleBulkAction && isSelected,\n\t\t\t\t'is-hovered': isHovered,\n\t\t\t\t'has-bulk-actions': hasPossibleBulkAction,\n\t\t\t} ) }\n\t\t\tonMouseEnter={ handleMouseEnter }\n\t\t\tonMouseLeave={ handleMouseLeave }\n\t\t\tonTouchStart={ () => {\n\t\t\t\tisTouchDeviceRef.current = true;\n\t\t\t} }\n\t\t\tonClick={ () => {\n\t\t\t\tif ( ! hasPossibleBulkAction ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\t! isTouchDeviceRef.current &&\n\t\t\t\t\tdocument.getSelection()?.type !== 'Range'\n\t\t\t\t) {\n\t\t\t\t\tonChangeSelection(\n\t\t\t\t\t\tselection.includes( id )\n\t\t\t\t\t\t\t? selection.filter( ( itemId ) => id !== itemId )\n\t\t\t\t\t\t\t: [ id ]\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} }\n\t\t>\n\t\t\t{ hasBulkActions && (\n\t\t\t\t<td\n\t\t\t\t\tclassName=\"dataviews-view-table__checkbox-column\"\n\t\t\t\t\tstyle={ {\n\t\t\t\t\t\twidth: '1%',\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t<div className=\"dataviews-view-table__cell-content-wrapper\">\n\t\t\t\t\t\t<SingleSelectionCheckbox\n\t\t\t\t\t\t\titem={ item }\n\t\t\t\t\t\t\tselection={ selection }\n\t\t\t\t\t\t\tonChangeSelection={ onChangeSelection }\n\t\t\t\t\t\t\tgetItemId={ getItemId }\n\t\t\t\t\t\t\tprimaryField={ primaryField }\n\t\t\t\t\t\t\tdisabled={ ! hasPossibleBulkAction }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</td>\n\t\t\t) }\n\t\t\t{ columns.map( ( column: string ) => {\n\t\t\t\t// Explicits picks the supported styles.\n\t\t\t\tconst { width, maxWidth, minWidth } =\n\t\t\t\t\tview.layout?.styles?.[ column ] ?? {};\n\n\t\t\t\treturn (\n\t\t\t\t\t<td key={ column } style={ { width, maxWidth, minWidth } }>\n\t\t\t\t\t\t<TableColumn\n\t\t\t\t\t\t\tprimaryField={ primaryField }\n\t\t\t\t\t\t\tfields={ fields }\n\t\t\t\t\t\t\titem={ item }\n\t\t\t\t\t\t\tcolumn={ column }\n\t\t\t\t\t\t\tview={ view }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</td>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t\t{ !! actions?.length && (\n\t\t\t\t// Disable reason: we are not making the element interactive,\n\t\t\t\t// but preventing any click events from bubbling up to the\n\t\t\t\t// table row. This allows us to add a click handler to the row\n\t\t\t\t// itself (to toggle row selection) without erroneously\n\t\t\t\t// intercepting click events from ItemActions.\n\n\t\t\t\t/* eslint-disable jsx-a11y/no-noninteractive-element-interactions, jsx-a11y/click-events-have-key-events */\n\t\t\t\t<td\n\t\t\t\t\tclassName=\"dataviews-view-table__actions-column\"\n\t\t\t\t\tonClick={ ( e ) => e.stopPropagation() }\n\t\t\t\t>\n\t\t\t\t\t<ItemActions item={ item } actions={ actions } />\n\t\t\t\t</td>\n\t\t\t\t/* eslint-enable jsx-a11y/no-noninteractive-element-interactions, jsx-a11y/click-events-have-key-events */\n\t\t\t) }\n\t\t</tr>\n\t);\n}\n\nfunction ViewTable< Item >( {\n\tactions,\n\tdata,\n\tfields,\n\tgetItemId,\n\tisLoading = false,\n\tonChangeView,\n\tonChangeSelection,\n\tselection,\n\tsetOpenedFilter,\n\tview,\n}: ViewTableProps< Item > ) {\n\tconst headerMenuRefs = useRef<\n\t\tMap< string, { node: HTMLButtonElement; fallback: string } >\n\t>( new Map() );\n\tconst headerMenuToFocusRef = useRef< HTMLButtonElement >();\n\tconst [ nextHeaderMenuToFocus, setNextHeaderMenuToFocus ] =\n\t\tuseState< HTMLButtonElement >();\n\tconst hasBulkActions = useSomeItemHasAPossibleBulkAction( actions, data );\n\n\tuseEffect( () => {\n\t\tif ( headerMenuToFocusRef.current ) {\n\t\t\theaderMenuToFocusRef.current.focus();\n\t\t\theaderMenuToFocusRef.current = undefined;\n\t\t}\n\t} );\n\n\tconst tableNoticeId = useId();\n\n\tif ( nextHeaderMenuToFocus ) {\n\t\t// If we need to force focus, we short-circuit rendering here\n\t\t// to prevent any additional work while we handle that.\n\t\t// Clearing out the focus directive is necessary to make sure\n\t\t// future renders don't cause unexpected focus jumps.\n\t\theaderMenuToFocusRef.current = nextHeaderMenuToFocus;\n\t\tsetNextHeaderMenuToFocus( undefined );\n\t\treturn;\n\t}\n\n\tconst onHide = ( field: NormalizedField< Item > ) => {\n\t\tconst hidden = headerMenuRefs.current.get( field.id );\n\t\tconst fallback = hidden\n\t\t\t? headerMenuRefs.current.get( hidden.fallback )\n\t\t\t: undefined;\n\t\tsetNextHeaderMenuToFocus( fallback?.node );\n\t};\n\n\tconst columns = getVisibleFieldIds( view, fields );\n\tconst hasData = !! data?.length;\n\n\tconst primaryField = fields.find(\n\t\t( field ) => field.id === view.layout?.primaryField\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<table\n\t\t\t\tclassName=\"dataviews-view-table\"\n\t\t\t\taria-busy={ isLoading }\n\t\t\t\taria-describedby={ tableNoticeId }\n\t\t\t>\n\t\t\t\t<thead>\n\t\t\t\t\t<tr className=\"dataviews-view-table__row\">\n\t\t\t\t\t\t{ hasBulkActions && (\n\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\tclassName=\"dataviews-view-table__checkbox-column\"\n\t\t\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t\t\twidth: '1%',\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\tscope=\"col\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<BulkSelectionCheckbox\n\t\t\t\t\t\t\t\t\tselection={ selection }\n\t\t\t\t\t\t\t\t\tonChangeSelection={ onChangeSelection }\n\t\t\t\t\t\t\t\t\tdata={ data }\n\t\t\t\t\t\t\t\t\tactions={ actions }\n\t\t\t\t\t\t\t\t\tgetItemId={ getItemId }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ columns.map( ( column, index ) => {\n\t\t\t\t\t\t\t// Explicits picks the supported styles.\n\t\t\t\t\t\t\tconst { width, maxWidth, minWidth } =\n\t\t\t\t\t\t\t\tview.layout?.styles?.[ column ] ?? {};\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\t\tkey={ column }\n\t\t\t\t\t\t\t\t\tstyle={ { width, maxWidth, minWidth } }\n\t\t\t\t\t\t\t\t\taria-sort={\n\t\t\t\t\t\t\t\t\t\tview.sort?.field === column\n\t\t\t\t\t\t\t\t\t\t\t? sortValues[ view.sort.direction ]\n\t\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tscope=\"col\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<ColumnHeaderMenu\n\t\t\t\t\t\t\t\t\t\tref={ ( node ) => {\n\t\t\t\t\t\t\t\t\t\t\tif ( node ) {\n\t\t\t\t\t\t\t\t\t\t\t\theaderMenuRefs.current.set(\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn,\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfallback:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolumns[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex > 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? index - 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\theaderMenuRefs.current.delete(\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolumn\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\tfieldId={ column }\n\t\t\t\t\t\t\t\t\t\tview={ view }\n\t\t\t\t\t\t\t\t\t\tfields={ fields }\n\t\t\t\t\t\t\t\t\t\tonChangeView={ onChangeView }\n\t\t\t\t\t\t\t\t\t\tonHide={ onHide }\n\t\t\t\t\t\t\t\t\t\tsetOpenedFilter={ setOpenedFilter }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t{ !! actions?.length && (\n\t\t\t\t\t\t\t<th className=\"dataviews-view-table__actions-column\">\n\t\t\t\t\t\t\t\t<span className=\"dataviews-view-table-header\">\n\t\t\t\t\t\t\t\t\t{ __( 'Actions' ) }\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{ hasData &&\n\t\t\t\t\t\tdata.map( ( item, index ) => (\n\t\t\t\t\t\t\t<TableRow\n\t\t\t\t\t\t\t\tkey={ getItemId( item ) }\n\t\t\t\t\t\t\t\titem={ item }\n\t\t\t\t\t\t\t\thasBulkActions={ hasBulkActions }\n\t\t\t\t\t\t\t\tactions={ actions }\n\t\t\t\t\t\t\t\tfields={ fields }\n\t\t\t\t\t\t\t\tid={ getItemId( item ) || index.toString() }\n\t\t\t\t\t\t\t\tview={ view }\n\t\t\t\t\t\t\t\tprimaryField={ primaryField }\n\t\t\t\t\t\t\t\tselection={ selection }\n\t\t\t\t\t\t\t\tgetItemId={ getItemId }\n\t\t\t\t\t\t\t\tonChangeSelection={ onChangeSelection }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) ) }\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t\t<div\n\t\t\t\tclassName={ clsx( {\n\t\t\t\t\t'dataviews-loading': isLoading,\n\t\t\t\t\t'dataviews-no-results': ! hasData && ! isLoading,\n\t\t\t\t} ) }\n\t\t\t\tid={ tableNoticeId }\n\t\t\t>\n\t\t\t\t{ ! hasData && (\n\t\t\t\t\t<p>{ isLoading ? <Spinner /> : __( 'No results' ) }</p>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nexport default ViewTable;\n"],"mappings":"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","ignoreList":[]}