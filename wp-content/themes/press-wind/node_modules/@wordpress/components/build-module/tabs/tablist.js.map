{"version":3,"names":["Ariakit","useStoreState","warning","forwardRef","useLayoutEffect","useState","useMergeRefs","useTabsContext","TabListWrapper","clsx","useTrackElementOffsetRect","useTrackOverflow","useAnimatedOffsetRect","jsx","_jsx","DEFAULT_SCROLL_MARGIN","useScrollRectIntoView","parent","rect","margin","scrollLeft","parentScroll","parentWidth","getBoundingClientRect","width","left","childLeft","childWidth","parentRightEdge","childRightEdge","rightOverflow","leftOverflow","TabList","children","otherProps","ref","_useTabsContext","store","selectedId","activeId","selectOnMove","items","setParent","refs","selectedRect","item","element","overflow","first","at","last","prefix","dataAttribute","transitionEndFilter","event","pseudoElement","onBlur","setActiveId","globalThis","SCRIPT_DEBUG","render","tabIndex","className"],"sources":["@wordpress/components/src/tabs/tablist.tsx"],"sourcesContent":["/**\n * External dependencies\n */\nimport * as Ariakit from '@ariakit/react';\nimport { useStoreState } from '@ariakit/react';\n\n/**\n * WordPress dependencies\n */\nimport warning from '@wordpress/warning';\nimport { forwardRef, useLayoutEffect, useState } from '@wordpress/element';\nimport { useMergeRefs } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport type { TabListProps } from './types';\nimport { useTabsContext } from './context';\nimport { TabListWrapper } from './styles';\nimport type { WordPressComponentProps } from '../context';\nimport clsx from 'clsx';\nimport type { ElementOffsetRect } from '../utils/element-rect';\nimport { useTrackElementOffsetRect } from '../utils/element-rect';\nimport { useTrackOverflow } from './use-track-overflow';\nimport { useAnimatedOffsetRect } from '../utils/hooks/use-animated-offset-rect';\n\nconst DEFAULT_SCROLL_MARGIN = 24;\n\n/**\n * Scrolls a given parent element so that a given rect is visible.\n *\n * The scroll is updated initially and whenever the rect changes.\n */\nfunction useScrollRectIntoView(\n\tparent: HTMLElement | undefined,\n\trect: ElementOffsetRect,\n\t{ margin = DEFAULT_SCROLL_MARGIN } = {}\n) {\n\tuseLayoutEffect( () => {\n\t\tif ( ! parent || ! rect ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { scrollLeft: parentScroll } = parent;\n\t\tconst parentWidth = parent.getBoundingClientRect().width;\n\t\tconst { left: childLeft, width: childWidth } = rect;\n\n\t\tconst parentRightEdge = parentScroll + parentWidth;\n\t\tconst childRightEdge = childLeft + childWidth;\n\t\tconst rightOverflow = childRightEdge + margin - parentRightEdge;\n\t\tconst leftOverflow = parentScroll - ( childLeft - margin );\n\t\tif ( leftOverflow > 0 ) {\n\t\t\tparent.scrollLeft = parentScroll - leftOverflow;\n\t\t} else if ( rightOverflow > 0 ) {\n\t\t\tparent.scrollLeft = parentScroll + rightOverflow;\n\t\t}\n\t}, [ margin, parent, rect ] );\n}\n\nexport const TabList = forwardRef<\n\tHTMLDivElement,\n\tWordPressComponentProps< TabListProps, 'div', false >\n>( function TabList( { children, ...otherProps }, ref ) {\n\tconst { store } = useTabsContext() ?? {};\n\n\tconst selectedId = useStoreState( store, 'selectedId' );\n\tconst activeId = useStoreState( store, 'activeId' );\n\tconst selectOnMove = useStoreState( store, 'selectOnMove' );\n\tconst items = useStoreState( store, 'items' );\n\tconst [ parent, setParent ] = useState< HTMLElement >();\n\tconst refs = useMergeRefs( [ ref, setParent ] );\n\tconst selectedRect = useTrackElementOffsetRect(\n\t\tstore?.item( selectedId )?.element\n\t);\n\n\t// Track overflow to show scroll hints.\n\tconst overflow = useTrackOverflow( parent, {\n\t\tfirst: items?.at( 0 )?.element,\n\t\tlast: items?.at( -1 )?.element,\n\t} );\n\n\t// Size, position, and animate the indicator.\n\tuseAnimatedOffsetRect( parent, selectedRect, {\n\t\tprefix: 'selected',\n\t\tdataAttribute: 'indicator-animated',\n\t\ttransitionEndFilter: ( event ) => event.pseudoElement === '::before',\n\t} );\n\n\t// Make sure selected tab is scrolled into view.\n\tuseScrollRectIntoView( parent, selectedRect );\n\n\tconst onBlur = () => {\n\t\tif ( ! selectOnMove ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// When automatic tab selection is on, make sure that the active tab is up\n\t\t// to date with the selected tab when leaving the tablist. This makes sure\n\t\t// that the selected tab will receive keyboard focus when tabbing back into\n\t\t// the tablist.\n\t\tif ( selectedId !== activeId ) {\n\t\t\tstore?.setActiveId( selectedId );\n\t\t}\n\t};\n\n\tif ( ! store ) {\n\t\twarning( '`Tabs.TabList` must be wrapped in a `Tabs` component.' );\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Ariakit.TabList\n\t\t\tref={ refs }\n\t\t\tstore={ store }\n\t\t\trender={ <TabListWrapper /> }\n\t\t\tonBlur={ onBlur }\n\t\t\ttabIndex={ -1 }\n\t\t\tdata-select-on-move={ selectOnMove ? 'true' : 'false' }\n\t\t\t{ ...otherProps }\n\t\t\tclassName={ clsx(\n\t\t\t\toverflow.first && 'is-overflowing-first',\n\t\t\t\toverflow.last && 'is-overflowing-last',\n\t\t\t\totherProps.className\n\t\t\t) }\n\t\t>\n\t\t\t{ children }\n\t\t</Ariakit.TabList>\n\t);\n} );\n"],"mappings":"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","ignoreList":[]}