{"version":3,"names":["backup","dispatch","select","useDispatch","store","coreStore","__","sprintf","noticesStore","useState","parse","__unstableSerializeAndClean","Button","__experimentalText","Text","__experimentalHStack","HStack","__experimentalVStack","VStack","addQueryArgs","apiFetch","getItemTitle","isTemplateOrTemplatePart","TEMPLATE_ORIGINS","TEMPLATE_POST_TYPE","jsx","_jsx","jsxs","_jsxs","isTemplateRevertable","templateOrTemplatePart","source","custom","Boolean","plugin","has_theme_file","revertTemplate","template","allowUndo","noticeId","removeNotice","createErrorNotice","type","templateEntityConfig","getEntityConfig","fileTemplatePath","baseURL","id","context","origin","fileTemplate","path","serializeBlocks","blocks","blocksForSerialization","edited","getEditedEntityRecord","editEntityRecord","content","undoIgnore","raw","undoRevert","createSuccessNotice","actions","label","onClick","error","errorMessage","message","code","resetPostAction","isEligible","item","icon","supportsBulk","hideModalHeader","RenderModal","items","closeModal","onActionPerformed","isBusy","setIsBusy","saveEditedEntityRecord","onConfirm","length","fallbackErrorMessage","typedError","spacing","children","justify","__next40pxDefaultSize","variant","disabled","accessibleWhenDisabled"],"sources":["@wordpress/fields/src/actions/reset-post.tsx"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { backup } from '@wordpress/icons';\nimport { dispatch, select, useDispatch } from '@wordpress/data';\nimport { store as coreStore } from '@wordpress/core-data';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { useState } from '@wordpress/element';\n// @ts-ignore\nimport { parse, __unstableSerializeAndClean } from '@wordpress/blocks';\nimport {\n\tButton,\n\t__experimentalText as Text,\n\t__experimentalHStack as HStack,\n\t__experimentalVStack as VStack,\n} from '@wordpress/components';\nimport type { Action } from '@wordpress/dataviews';\nimport { addQueryArgs } from '@wordpress/url';\nimport apiFetch from '@wordpress/api-fetch';\n\n/**\n * Internal dependencies\n */\nimport {\n\tgetItemTitle,\n\tisTemplateOrTemplatePart,\n\tTEMPLATE_ORIGINS,\n\tTEMPLATE_POST_TYPE,\n} from './utils';\nimport type { CoreDataError, Template, TemplatePart } from '../types';\n\nconst isTemplateRevertable = (\n\ttemplateOrTemplatePart: Template | TemplatePart\n) => {\n\tif ( ! templateOrTemplatePart ) {\n\t\treturn false;\n\t}\n\n\treturn (\n\t\ttemplateOrTemplatePart.source === TEMPLATE_ORIGINS.custom &&\n\t\t( Boolean( templateOrTemplatePart?.plugin ) ||\n\t\t\ttemplateOrTemplatePart?.has_theme_file )\n\t);\n};\n\n/**\n *  Copied - pasted from https://github.com/WordPress/gutenberg/blob/bf1462ad37d4637ebbf63270b9c244b23c69e2a8/packages/editor/src/store/private-actions.js#L233-L365\n *\n * @param {Object}  template            The template to revert.\n * @param {Object}  [options]\n * @param {boolean} [options.allowUndo] Whether to allow the user to undo\n *                                      reverting the template. Default true.\n */\nconst revertTemplate = async (\n\ttemplate: TemplatePart | Template,\n\t{ allowUndo = true } = {}\n) => {\n\tconst noticeId = 'edit-site-template-reverted';\n\tdispatch( noticesStore ).removeNotice( noticeId );\n\tif ( ! isTemplateRevertable( template ) ) {\n\t\tdispatch( noticesStore ).createErrorNotice(\n\t\t\t__( 'This template is not revertable.' ),\n\t\t\t{\n\t\t\t\ttype: 'snackbar',\n\t\t\t}\n\t\t);\n\t\treturn;\n\t}\n\n\ttry {\n\t\tconst templateEntityConfig = select( coreStore ).getEntityConfig(\n\t\t\t'postType',\n\t\t\ttemplate.type\n\t\t);\n\n\t\tif ( ! templateEntityConfig ) {\n\t\t\tdispatch( noticesStore ).createErrorNotice(\n\t\t\t\t__(\n\t\t\t\t\t'The editor has encountered an unexpected error. Please reload.'\n\t\t\t\t),\n\t\t\t\t{ type: 'snackbar' }\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tconst fileTemplatePath = addQueryArgs(\n\t\t\t`${ templateEntityConfig.baseURL }/${ template.id }`,\n\t\t\t{ context: 'edit', source: template.origin }\n\t\t);\n\n\t\tconst fileTemplate = ( await apiFetch( {\n\t\t\tpath: fileTemplatePath,\n\t\t} ) ) as any;\n\t\tif ( ! fileTemplate ) {\n\t\t\tdispatch( noticesStore ).createErrorNotice(\n\t\t\t\t__(\n\t\t\t\t\t'The editor has encountered an unexpected error. Please reload.'\n\t\t\t\t),\n\t\t\t\t{ type: 'snackbar' }\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tconst serializeBlocks = ( { blocks: blocksForSerialization = [] } ) =>\n\t\t\t__unstableSerializeAndClean( blocksForSerialization );\n\n\t\tconst edited = select( coreStore ).getEditedEntityRecord(\n\t\t\t'postType',\n\t\t\ttemplate.type,\n\t\t\ttemplate.id\n\t\t) as any;\n\n\t\t// We are fixing up the undo level here to make sure we can undo\n\t\t// the revert in the header toolbar correctly.\n\t\tdispatch( coreStore ).editEntityRecord(\n\t\t\t'postType',\n\t\t\ttemplate.type,\n\t\t\ttemplate.id,\n\t\t\t{\n\t\t\t\tcontent: serializeBlocks, // Required to make the `undo` behave correctly.\n\t\t\t\tblocks: edited.blocks, // Required to revert the blocks in the editor.\n\t\t\t\tsource: 'custom', // required to avoid turning the editor into a dirty state\n\t\t\t},\n\t\t\t{\n\t\t\t\tundoIgnore: true, // Required to merge this edit with the last undo level.\n\t\t\t}\n\t\t);\n\n\t\tconst blocks = parse( fileTemplate?.content?.raw );\n\n\t\tdispatch( coreStore ).editEntityRecord(\n\t\t\t'postType',\n\t\t\ttemplate.type,\n\t\t\tfileTemplate.id,\n\t\t\t{\n\t\t\t\tcontent: serializeBlocks,\n\t\t\t\tblocks,\n\t\t\t\tsource: 'theme',\n\t\t\t}\n\t\t);\n\n\t\tif ( allowUndo ) {\n\t\t\tconst undoRevert = () => {\n\t\t\t\tdispatch( coreStore ).editEntityRecord(\n\t\t\t\t\t'postType',\n\t\t\t\t\ttemplate.type,\n\t\t\t\t\tedited.id,\n\t\t\t\t\t{\n\t\t\t\t\t\tcontent: serializeBlocks,\n\t\t\t\t\t\tblocks: edited.blocks,\n\t\t\t\t\t\tsource: 'custom',\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tdispatch( noticesStore ).createSuccessNotice(\n\t\t\t\t__( 'Template reset.' ),\n\t\t\t\t{\n\t\t\t\t\ttype: 'snackbar',\n\t\t\t\t\tid: noticeId,\n\t\t\t\t\tactions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: __( 'Undo' ),\n\t\t\t\t\t\t\tonClick: undoRevert,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t} catch ( error: any ) {\n\t\tconst errorMessage =\n\t\t\terror.message && error.code !== 'unknown_error'\n\t\t\t\t? error.message\n\t\t\t\t: __( 'Template revert failed. Please reload.' );\n\n\t\tdispatch( noticesStore ).createErrorNotice( errorMessage, {\n\t\t\ttype: 'snackbar',\n\t\t} );\n\t}\n};\n\nconst resetPostAction: Action< Template | TemplatePart > = {\n\tid: 'reset-post',\n\tlabel: __( 'Reset' ),\n\tisEligible: ( item ) => {\n\t\treturn (\n\t\t\tisTemplateOrTemplatePart( item ) &&\n\t\t\titem?.source === TEMPLATE_ORIGINS.custom &&\n\t\t\t( Boolean( item.type === 'wp_template' && item?.plugin ) ||\n\t\t\t\titem?.has_theme_file )\n\t\t);\n\t},\n\ticon: backup,\n\tsupportsBulk: true,\n\thideModalHeader: true,\n\tRenderModal: ( { items, closeModal, onActionPerformed } ) => {\n\t\tconst [ isBusy, setIsBusy ] = useState( false );\n\n\t\tconst { saveEditedEntityRecord } = useDispatch( coreStore );\n\t\tconst { createSuccessNotice, createErrorNotice } =\n\t\t\tuseDispatch( noticesStore );\n\t\tconst onConfirm = async () => {\n\t\t\ttry {\n\t\t\t\tfor ( const template of items ) {\n\t\t\t\t\tawait revertTemplate( template, {\n\t\t\t\t\t\tallowUndo: false,\n\t\t\t\t\t} );\n\t\t\t\t\tawait saveEditedEntityRecord(\n\t\t\t\t\t\t'postType',\n\t\t\t\t\t\ttemplate.type,\n\t\t\t\t\t\ttemplate.id\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tcreateSuccessNotice(\n\t\t\t\t\titems.length > 1\n\t\t\t\t\t\t? sprintf(\n\t\t\t\t\t\t\t\t/* translators: The number of items. */\n\t\t\t\t\t\t\t\t__( '%s items reset.' ),\n\t\t\t\t\t\t\t\titems.length\n\t\t\t\t\t\t  )\n\t\t\t\t\t\t: sprintf(\n\t\t\t\t\t\t\t\t/* translators: The template/part's name. */\n\t\t\t\t\t\t\t\t__( '\"%s\" reset.' ),\n\t\t\t\t\t\t\t\tgetItemTitle( items[ 0 ] )\n\t\t\t\t\t\t  ),\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'snackbar',\n\t\t\t\t\t\tid: 'revert-template-action',\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} catch ( error ) {\n\t\t\t\tlet fallbackErrorMessage;\n\t\t\t\tif ( items[ 0 ].type === TEMPLATE_POST_TYPE ) {\n\t\t\t\t\tfallbackErrorMessage =\n\t\t\t\t\t\titems.length === 1\n\t\t\t\t\t\t\t? __(\n\t\t\t\t\t\t\t\t\t'An error occurred while reverting the template.'\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t: __(\n\t\t\t\t\t\t\t\t\t'An error occurred while reverting the templates.'\n\t\t\t\t\t\t\t  );\n\t\t\t\t} else {\n\t\t\t\t\tfallbackErrorMessage =\n\t\t\t\t\t\titems.length === 1\n\t\t\t\t\t\t\t? __(\n\t\t\t\t\t\t\t\t\t'An error occurred while reverting the template part.'\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t: __(\n\t\t\t\t\t\t\t\t\t'An error occurred while reverting the template parts.'\n\t\t\t\t\t\t\t  );\n\t\t\t\t}\n\n\t\t\t\tconst typedError = error as CoreDataError;\n\t\t\t\tconst errorMessage =\n\t\t\t\t\ttypedError.message && typedError.code !== 'unknown_error'\n\t\t\t\t\t\t? typedError.message\n\t\t\t\t\t\t: fallbackErrorMessage;\n\n\t\t\t\tcreateErrorNotice( errorMessage, { type: 'snackbar' } );\n\t\t\t}\n\t\t};\n\t\treturn (\n\t\t\t<VStack spacing=\"5\">\n\t\t\t\t<Text>\n\t\t\t\t\t{ __( 'Reset to default and clear all customizations?' ) }\n\t\t\t\t</Text>\n\t\t\t\t<HStack justify=\"right\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\tonClick={ closeModal }\n\t\t\t\t\t\tdisabled={ isBusy }\n\t\t\t\t\t\taccessibleWhenDisabled\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Cancel' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\tonClick={ async () => {\n\t\t\t\t\t\t\tsetIsBusy( true );\n\t\t\t\t\t\t\tawait onConfirm();\n\t\t\t\t\t\t\tonActionPerformed?.( items );\n\t\t\t\t\t\t\tsetIsBusy( false );\n\t\t\t\t\t\t\tcloseModal?.();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tisBusy={ isBusy }\n\t\t\t\t\t\tdisabled={ isBusy }\n\t\t\t\t\t\taccessibleWhenDisabled\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Reset' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</HStack>\n\t\t\t</VStack>\n\t\t);\n\t},\n};\n\nexport default resetPostAction;\n"],"mappings":"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","ignoreList":[]}